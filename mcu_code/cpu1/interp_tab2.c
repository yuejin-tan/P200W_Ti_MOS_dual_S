/*
 * interp_tab.c
 *
 *  Created on: 2023年5月9日
 *      Author: t
 */

#include "interp_tab.h"
#include "algo_code_config.h"
#include "psi_lut.h"
#include "bsp_cfg.h"

 // MTPA情况下转矩和用D轴电流的对应关系，对应转矩为0，1，2……23
const float TE_ID_MTPA_2WAY_TAB[] = {
-95.1993F, //-25
-90.9582F, //-24
-86.7171F, //-23
-82.4760F, //-22
-78.2349F, //-21
-73.9938F,
-69.8192F,
-65.9019F,
-62.0809F,
-58.1454F,
-54.5526F,
-50.7952F,
-47.0607F,
-43.5219F,
-40.1762F,
-36.4646F,
-32.7767F,
-29.1138F,
-25.4885F,
-21.8242F,
-18.0281F,
-14.3423F,
-10.4731F,
-6.2729F,
-2.4611F,
0.0000F,  //0
-2.4611F,
-6.2729F,
-10.4731F,
-14.3423F,
-18.0281F,
-21.8242F,
-25.4885F,
-29.1138F,
-32.7767F,
-36.4646F,
-40.1762F,
-43.5219F,
-47.0607F,
-50.7952F,
-54.5526F,
-58.1454F,
-62.0809F,
-65.9019F,
-69.8192F,
-73.9938F, //20
-78.2349F, //21
-82.4760F, //22
-86.7171F, //23
-90.9582F, //24
-95.1993F, //25
};

// MTPA情况下转矩和用Q轴电流的对应关系，对应转矩为0，1，2……23
const float TE_IQ_MTPA_2WAY_TAB[] = {
-67.8156F, //-25
-66.4327F, //-24
-65.0498F, //-23
-63.6669F, //-22
-62.2840F, //-21
-60.9011F,
-59.3975F,
-57.8522F,
-56.2140F,
-54.3850F,
-52.5832F,
-50.5565F,
-48.3895F,
-46.1867F,
-44.0005F,
-41.7293F,
-39.3986F,
-37.0031F,
-34.5279F,
-31.8822F,
-28.9340F,
-25.7788F,
-22.0103F,
-17.0049F,
-10.5501F,
0.0000F,
10.5501F,
17.0049F,
22.0103F,
25.7788F,
28.9340F,
31.8822F,
34.5279F,
37.0031F,
39.3986F,
41.7293F,
44.0005F,
46.1867F,
48.3895F,
50.5565F,
52.5832F,
54.3850F,
56.2140F,
57.8522F,
59.3975F,
60.9011F,
62.2840F, //21
63.6669F, //22
65.0498F, //23
66.4327F, //24
67.8156F, //25
};

// 磁链查找表
const float psiLUTis_1 = (16.0 - 1.0) / 10.0;

const float psidLUTpu16negIdxIqy[256] = {7.702147e-03, 7.696554e-03, 7.693423e-03, 7.689146e-03, 7.682973e-03, 7.676324e-03, 7.673097e-03, 7.671786e-03, 7.670063e-03, 7.667541e-03, 7.664109e-03, 7.659824e-03, 7.655852e-03, 7.652751e-03, 7.650618e-03, 7.648142e-03, 7.546292e-03, 7.543691e-03, 7.541171e-03, 7.538279e-03, 7.535715e-03, 7.534656e-03, 7.536120e-03, 7.536726e-03, 7.536485e-03, 7.535635e-03, 7.533951e-03, 7.531027e-03, 7.528199e-03, 7.525803e-03, 7.524548e-03, 7.523896e-03, 7.393482e-03, 7.391462e-03, 7.390301e-03, 7.389506e-03, 7.391194e-03, 7.395737e-03, 7.399774e-03, 7.401938e-03, 7.402841e-03, 7.403080e-03, 7.402450e-03, 7.401025e-03, 7.399416e-03, 7.398364e-03, 7.397819e-03, 7.397756e-03, 7.240231e-03, 7.239639e-03, 7.240308e-03, 7.243732e-03, 7.250149e-03, 7.257419e-03, 7.263359e-03, 7.267131e-03, 7.269372e-03, 7.270222e-03, 7.269894e-03, 7.269615e-03, 7.269588e-03, 7.269919e-03, 7.270187e-03, 7.270944e-03, 7.087241e-03, 7.089406e-03, 7.093376e-03, 7.101329e-03, 7.110134e-03, 7.118665e-03, 7.125616e-03, 7.130664e-03, 7.133973e-03, 7.135313e-03, 7.135244e-03, 7.135685e-03, 7.138095e-03, 7.140024e-03, 7.141476e-03, 7.143578e-03, 6.937706e-03, 6.942988e-03, 6.951307e-03, 6.960578e-03, 6.971349e-03, 6.981038e-03, 6.988442e-03, 6.993919e-03, 6.997003e-03, 6.997990e-03, 6.998164e-03, 6.999176e-03, 7.002550e-03, 7.007317e-03, 7.011856e-03, 7.015397e-03, 6.795410e-03, 6.802906e-03, 6.811473e-03, 6.821157e-03, 6.832544e-03, 6.842924e-03, 6.851073e-03, 6.857075e-03, 6.859972e-03, 6.860657e-03, 6.861050e-03, 6.862596e-03, 6.865900e-03, 6.871934e-03, 6.878637e-03, 6.884856e-03, 6.655943e-03, 6.663552e-03, 6.672283e-03, 6.682028e-03, 6.692562e-03, 6.702448e-03, 6.711626e-03, 6.718858e-03, 6.722631e-03, 6.724033e-03, 6.725340e-03, 6.727415e-03, 6.730688e-03, 6.737007e-03, 6.744176e-03, 6.751597e-03, 6.517116e-03, 6.524925e-03, 6.533577e-03, 6.542657e-03, 6.552369e-03, 6.561837e-03, 6.571512e-03, 6.579605e-03, 6.584457e-03, 6.587418e-03, 6.590434e-03, 6.593728e-03, 6.597440e-03, 6.603374e-03, 6.609657e-03, 6.616057e-03, 6.379649e-03, 6.387165e-03, 6.395274e-03, 6.404220e-03, 6.413723e-03, 6.423176e-03, 6.432766e-03, 6.441472e-03, 6.447824e-03, 6.452605e-03, 6.457086e-03, 6.461377e-03, 6.465569e-03, 6.470371e-03, 6.475007e-03, 6.479391e-03, 6.243354e-03, 6.250387e-03, 6.257484e-03, 6.265538e-03, 6.274617e-03, 6.284055e-03, 6.293697e-03, 6.303830e-03, 6.312787e-03, 6.319854e-03, 6.325799e-03, 6.330753e-03, 6.334775e-03, 6.337433e-03, 6.340002e-03, 6.342128e-03, 6.106822e-03, 6.113414e-03, 6.120046e-03, 6.126419e-03, 6.134476e-03, 6.143817e-03, 6.154012e-03, 6.165417e-03, 6.176599e-03, 6.186007e-03, 6.193464e-03, 6.198989e-03, 6.202740e-03, 6.203208e-03, 6.203427e-03, 6.204165e-03, 5.969475e-03, 5.975945e-03, 5.982348e-03, 5.988918e-03, 5.995590e-03, 6.004860e-03, 6.015704e-03, 6.027222e-03, 6.038620e-03, 6.048516e-03, 6.056386e-03, 6.062227e-03, 6.063667e-03, 6.065144e-03, 6.065528e-03, 6.066024e-03, 5.831570e-03, 5.837947e-03, 5.844336e-03, 5.851244e-03, 5.859128e-03, 5.868145e-03, 5.878057e-03, 5.888219e-03, 5.897853e-03, 5.906493e-03, 5.913300e-03, 5.918148e-03, 5.921581e-03, 5.923669e-03, 5.925576e-03, 5.926853e-03, 5.693207e-03, 5.699563e-03, 5.706261e-03, 5.713770e-03, 5.722059e-03, 5.730460e-03, 5.739128e-03, 5.747355e-03, 5.755111e-03, 5.762234e-03, 5.767751e-03, 5.772091e-03, 5.776261e-03, 5.780055e-03, 5.783295e-03, 5.785935e-03, 5.554613e-03, 5.561200e-03, 5.568275e-03, 5.575940e-03, 5.583960e-03, 5.591678e-03, 5.598326e-03, 5.604070e-03, 5.609549e-03, 5.614645e-03, 5.618977e-03, 5.623572e-03, 5.628730e-03, 5.634153e-03, 5.639096e-03, 5.642576e-03, }; 
const float psiqLUTpu16negIdxIqy[256] = {0, 1.016517e-04, 2.043744e-04, 3.077368e-04, 4.116817e-04, 5.158937e-04, 6.208769e-04, 7.276356e-04, 8.358115e-04, 9.445670e-04, 1.053284e-03, 1.161466e-03, 1.268684e-03, 1.375330e-03, 1.481948e-03, 1.588842e-03, 0, 1.030584e-04, 2.067580e-04, 3.112082e-04, 4.164881e-04, 5.219025e-04, 6.290142e-04, 7.362453e-04, 8.434820e-04, 9.512342e-04, 1.058836e-03, 1.165460e-03, 1.271689e-03, 1.378234e-03, 1.485053e-03, 1.591882e-03, 0, 1.040798e-04, 2.085414e-04, 3.140576e-04, 4.201862e-04, 5.281485e-04, 6.372649e-04, 7.448169e-04, 8.513742e-04, 9.578955e-04, 1.064239e-03, 1.169610e-03, 1.275331e-03, 1.382036e-03, 1.488941e-03, 1.595526e-03, 0, 1.046896e-04, 2.105502e-04, 3.169705e-04, 4.246611e-04, 5.351897e-04, 6.455836e-04, 7.536567e-04, 8.599434e-04, 9.652891e-04, 1.070477e-03, 1.175230e-03, 1.280795e-03, 1.387373e-03, 1.493904e-03, 1.599829e-03, 0, 1.054253e-04, 2.123871e-04, 3.199419e-04, 4.301347e-04, 5.417451e-04, 6.521655e-04, 7.603509e-04, 8.670202e-04, 9.727312e-04, 1.077980e-03, 1.182894e-03, 1.288550e-03, 1.394500e-03, 1.500039e-03, 1.605338e-03, 0, 1.065224e-04, 2.142769e-04, 3.239256e-04, 4.356933e-04, 5.477515e-04, 6.585244e-04, 7.675698e-04, 8.745719e-04, 9.802602e-04, 1.085739e-03, 1.191481e-03, 1.297438e-03, 1.403043e-03, 1.508275e-03, 1.612789e-03, 0, 1.078660e-04, 2.176236e-04, 3.290130e-04, 4.416654e-04, 5.543555e-04, 6.662191e-04, 7.763887e-04, 8.837686e-04, 9.895387e-04, 1.095153e-03, 1.201266e-03, 1.307034e-03, 1.412274e-03, 1.517497e-03, 1.621850e-03, 0, 1.094820e-04, 2.205851e-04, 3.332998e-04, 4.467691e-04, 5.597892e-04, 6.723212e-04, 7.833770e-04, 8.919106e-04, 9.987539e-04, 1.105051e-03, 1.210807e-03, 1.316073e-03, 1.420747e-03, 1.525460e-03, 1.629331e-03, 0, 1.108412e-04, 2.226988e-04, 3.359296e-04, 4.498697e-04, 5.636295e-04, 6.767381e-04, 7.885546e-04, 8.986664e-04, 1.007298e-03, 1.114566e-03, 1.220112e-03, 1.324602e-03, 1.428355e-03, 1.531521e-03, 1.633985e-03, 0, 1.117469e-04, 2.244296e-04, 3.380119e-04, 4.522159e-04, 5.668182e-04, 6.806081e-04, 7.933861e-04, 9.054344e-04, 1.016065e-03, 1.124061e-03, 1.229270e-03, 1.332676e-03, 1.434507e-03, 1.535870e-03, 1.636796e-03, 0, 1.116732e-04, 2.243703e-04, 3.381755e-04, 4.523979e-04, 5.673974e-04, 6.823541e-04, 7.969481e-04, 9.111384e-04, 1.023254e-03, 1.131556e-03, 1.236564e-03, 1.339116e-03, 1.438996e-03, 1.538402e-03, 1.637376e-03, 0, 1.116054e-04, 2.235819e-04, 3.363162e-04, 4.501911e-04, 5.652780e-04, 6.812649e-04, 7.977417e-04, 9.136638e-04, 1.026912e-03, 1.135870e-03, 1.241006e-03, 1.343240e-03, 1.441574e-03, 1.538882e-03, 1.636217e-03, 0, 1.114591e-04, 2.230472e-04, 3.351487e-04, 4.477375e-04, 5.626850e-04, 6.790332e-04, 7.963675e-04, 9.129014e-04, 1.026793e-03, 1.136633e-03, 1.242133e-03, 1.342366e-03, 1.441115e-03, 1.538186e-03, 1.634940e-03, 0, 1.113873e-04, 2.228321e-04, 3.345725e-04, 4.475150e-04, 5.619447e-04, 6.774479e-04, 7.936327e-04, 9.090409e-04, 1.022181e-03, 1.131986e-03, 1.237678e-03, 1.339330e-03, 1.438176e-03, 1.536079e-03, 1.633352e-03, 0, 1.114193e-04, 2.229900e-04, 3.351107e-04, 4.481137e-04, 5.616408e-04, 6.760234e-04, 7.904878e-04, 9.043652e-04, 1.016428e-03, 1.125836e-03, 1.230835e-03, 1.333688e-03, 1.434058e-03, 1.532912e-03, 1.631102e-03, 0, 1.111702e-04, 2.231516e-04, 3.357074e-04, 4.485258e-04, 5.612026e-04, 6.738263e-04, 7.858796e-04, 8.972475e-04, 1.007524e-03, 1.116048e-03, 1.222176e-03, 1.326144e-03, 1.428012e-03, 1.528253e-03, 1.626627e-03, }; 
const float LdLUTpu16negId[16] = {2.064520e-04, 2.061657e-04, 2.058040e-04, 2.060778e-04, 2.064810e-04, 2.062340e-04, 2.059966e-04, 2.059687e-04, 2.051021e-04, 2.038908e-04, 2.040775e-04, 2.057962e-04, 2.081673e-04, 2.105456e-04, 2.129418e-04, 2.142353e-04, }; 
const float LqLUTpu16Iq[16] = {1.625698e-04, 1.632280e-04, 1.645804e-04, 1.660148e-04, 1.673553e-04, 1.680665e-04, 1.677031e-04, 1.664566e-04, 1.647040e-04, 1.625144e-04, 1.599029e-04, 1.574738e-04, 1.556411e-04, 1.544282e-04, 1.536306e-04, 1.532401e-04, }; 
